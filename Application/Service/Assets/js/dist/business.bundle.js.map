{"version":3,"sources":["webpack:///business.bundle.js","webpack:///./../js/entry/business.js","webpack:///./../js/api/business.js","webpack:///./../js/modules/business.js","webpack:///./../js/page/company_declare.js","webpack:///./../js/page/salary.js","webpack:///../js/tpl/batch_audit.vue?1de6","webpack:///../js/tpl/batch_audit.vue"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_require","combinePageModule","salary","company_declare","61","concatApi","api","updateSalaryOrder","deleteSalaryOrder","updateInsuranceOrder","63","$","layer","businessHandler","template","checkFn","click","e","_this","this","checkLen","filter","length","msg","_$$data","data","act","page","html","selectedData","serializeArray","$form","title","rules","messages","tplData","updateAct","value","text","render","open","skin","content","btn","yes","submit","success","iCheck","validate","submitHandler","form","formData","concat","_ref","_ref$msg","undefined","location","href","_ref2","_ref2$msg","call","131","dateFn","_require2","countDown","companyDeclare","init","checkAll","getYearMonth","each","$this","trim","end","Date","_$this$data","timer","getTime","setInterval","ret","dd","hh","mm","ss","clearInterval","141","WebUploader","dateRange","_require3","self","upload","getYearMonthDay","id","userId","userid","closest","remove","uploader","create","swf","server","auto","prepareNextFile","chunked","duplicate","accept","extensions","mimeTypes","pick","multiple","on","obj","212","234","__vue_script__","__vue_template__","options"],"mappings":"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","file":"business.bundle.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 0:\n/*!*******************************!*\\\n  !*** ../js/entry/business.js ***!\n  \\*******************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _require = __webpack_require__(/*! modules/util */ 4);\n\t\n\tvar combinePageModule = _require.combinePageModule;\n\t\n\t\n\tcombinePageModule({\n\t\tsalary: __webpack_require__(/*! page/salary */ 141),\n\t\tcompany_declare: __webpack_require__(/*! page/company_declare */ 131)\n\t});\n\n/***/ },\n\n/***/ 61:\n/*!*****************************!*\\\n  !*** ../js/api/business.js ***!\n  \\*****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// 业务管理模块\n\tvar _require = __webpack_require__(/*! ./config */ 8);\n\t\n\tvar concatApi = _require.concatApi;\n\t\n\tvar api = {\n\t\t// 批量审核、批量发放\n\t\tupdateSalaryOrder: 'Service-Business-updateSalaryOrder',\n\t\t// 删除代发工资\n\t\tdeleteSalaryOrder: 'Service-Business-deleteSalaryOrder',\n\t\n\t\tupdateInsuranceOrder: 'Service-Business-updateInsuranceOrder'\n\t};\n\t\n\tmodule.exports = concatApi(api);\n\n/***/ },\n\n/***/ 63:\n/*!*********************************!*\\\n  !*** ../js/modules/business.js ***!\n  \\*********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($, layer) {'use strict';\n\t\n\t// 代发工资和申报操作\n\texports.businessHandler = function () {\n\t    var template = __webpack_require__(/*! art-template */ 6);\n\t\n\t    var _require = __webpack_require__(/*! api/business */ 61);\n\t\n\t    var updateSalaryOrder = _require.updateSalaryOrder;\n\t    var updateInsuranceOrder = _require.updateInsuranceOrder;\n\t    var checkFn = __webpack_require__(/*! plug/icheck/index */ 5);\n\t\n\t    $('.payroll-handle').click(function (e) {\n\t        var _this = this;\n\t\n\t        var checkLen = $('.single-icheck').filter(':checked').length;\n\t\n\t        if (checkLen === 0) {\n\t            layer.msg('请选择记录~');\n\t        } else {\n\t            (function () {\n\t                var _$$data = $(_this).data();\n\t\n\t                var act = _$$data.act;\n\t                var page = _$$data.page;\n\t                var html = '';\n\t                var selectedData = $('#J_salary-form').serializeArray(); // 获取选中的checkbox\n\t\n\t                // 批量审核、批量发放\n\t                if (act) {\n\t                    (function () {\n\t\n\t                        var $form = null,\n\t                            title = '',\n\t                            rules = {},\n\t                            messages = {},\n\t                            tplData = {},\n\t                            updateAct = page == 'declare' ? updateInsuranceOrder : updateSalaryOrder;\n\t\n\t                        switch (act) {\n\t                            case 'batch_audit':\n\t                                tplData = {\n\t                                    value: 1,\n\t                                    text: '审核'\n\t                                };\n\t                                title = '批量审核';\n\t                                break;\n\t                            case 'batch_transact':\n\t                                tplData = {\n\t                                    value: 3,\n\t                                    text: '办理'\n\t                                };\n\t                                title = '批量办理';\n\t                                break;\n\t\n\t                            default:\n\t                                tplData = {\n\t                                    value: 3,\n\t                                    text: '发放'\n\t                                };\n\t                                title = '批量发放';\n\t                                break;\n\t                        }\n\t\n\t                        html = template.render(__webpack_require__(/*! tpl/batch_audit.vue */ 234).template)(tplData);\n\t\n\t                        layer.open({\n\t                            title: title,\n\t                            skin: 'batch-layer',\n\t                            content: html,\n\t                            btn: ['确定', '取消'],\n\t                            yes: function yes() {\n\t                                $form.submit();\n\t                            },\n\t                            success: function success() {\n\t                                $form = $('.batch-layer form');\n\t                                checkFn.iCheck();\n\t                                $form.validate({\n\t                                    submitHandler: function submitHandler(form) {\n\t                                        var formData = $(form).serializeArray();\n\t\n\t                                        updateAct(formData.concat(selectedData), function (_ref) {\n\t                                            var _ref$msg = _ref.msg;\n\t                                            var msg = _ref$msg === undefined ? title + '成功' : _ref$msg;\n\t\n\t                                            layer.msg(msg, function () {\n\t                                                location.href = location.href;\n\t                                            });\n\t                                        }, function (_ref2) {\n\t                                            var _ref2$msg = _ref2.msg;\n\t                                            var msg = _ref2$msg === undefined ? title + '失败' : _ref2$msg;\n\t\n\t                                            layer.msg(msg);\n\t                                        });\n\t                                    },\n\t\n\t                                    rules: rules,\n\t                                    messages: messages\n\t                                });\n\t                            }\n\t                        });\n\t                    })();\n\t                }\n\t            })();\n\t        }\n\t    });\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1), __webpack_require__(/*! layer */ 2)))\n\n/***/ },\n\n/***/ 131:\n/*!*************************************!*\\\n  !*** ../js/page/company_declare.js ***!\n  \\*************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\tvar checkFn = __webpack_require__(/*! plug/icheck/index */ 5);\n\t\n\tvar _require = __webpack_require__(/*! modules/business */ 63);\n\t\n\tvar businessHandler = _require.businessHandler; // 代发工资和申报操作,\n\tvar dateFn = __webpack_require__(/*! plug/datetimepicker/index */ 7);\n\t\n\tvar _require2 = __webpack_require__(/*! modules/date */ 28);\n\t\n\tvar countDown = _require2.countDown;\n\t\n\t\n\tvar companyDeclare = {\n\t    init: function init() {\n\t        checkFn.init();\n\t        checkFn.checkAll();\n\t        dateFn.getYearMonth();\n\t        businessHandler();\n\t\n\t        $('.deadline').each(function () {\n\t            var $this = $(this);\n\t            var value = $this.text().trim();\n\t            var end = new Date(value);\n\t\n\t            var _$this$data = $this.data();\n\t\n\t            var timer = _$this$data.timer;\n\t\n\t\n\t            if (value == '/') {\n\t                $this.html('/');\n\t            } else {\n\t                if (end.getTime() < new Date().getTime()) {\n\t                    $this.html('已截止');\n\t                } else {\n\t\n\t                    timer = setInterval(function () {\n\t                        var ret = countDown(end);\n\t                        var dd = ret.dd;\n\t                        var hh = ret.hh;\n\t                        var mm = ret.mm;\n\t                        var ss = ret.ss;\n\t\n\t\n\t                        if (!ret || end.getTime() < new Date().getTime()) {\n\t                            clearInterval(timer);\n\t                        }\n\t\n\t                        $this.html(dd + '天' + hh + '小时' + mm + '分' + ss + '秒');\n\t                    }, 1000);\n\t\n\t                    $this.data('timer', timer);\n\t                }\n\t            }\n\t        });\n\t    }\n\t};\n\t\n\tmodule.exports = companyDeclare;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))\n\n/***/ },\n\n/***/ 141:\n/*!****************************!*\\\n  !*** ../js/page/salary.js ***!\n  \\****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($, layer) {'use strict';\n\t\n\t/*\r\n\t * 上传模板 upload()\r\n\t */\n\t\n\tvar checkFn = __webpack_require__(/*! plug/icheck/index */ 5);\n\tvar WebUploader = __webpack_require__(/*! plug/webuploader/webuploader */ 34);\n\t\n\tvar _require = __webpack_require__(/*! api/business */ 61);\n\t\n\tvar deleteSalaryOrder = _require.deleteSalaryOrder;\n\tvar dateFn = __webpack_require__(/*! plug/datetimepicker/index */ 7);\n\t\n\tvar _require2 = __webpack_require__(/*! modules/date */ 28);\n\t\n\tvar dateRange = _require2.dateRange;\n\t\n\tvar _require3 = __webpack_require__(/*! modules/business */ 63);\n\t\n\tvar businessHandler = _require3.businessHandler; // 代发工资和申报操作\n\t\n\t__webpack_require__(/*! plug/validate/index */ 3);\n\t\n\tvar salary = {\n\t    init: function init() {\n\t        var self = this;\n\t\n\t        checkFn.init();\n\t        checkFn.checkAll();\n\t        businessHandler();\n\t        self.upload();\n\t        dateFn.getYearMonth();\n\t        dateFn.getYearMonthDay();\n\t        dateRange('declare');\n\t\n\t        // 删除代发工资\n\t        $('[data-act=\"del-salary\"]').click(function () {\n\t            var $this = $(this);\n\t\n\t            var _$this$data = $this.data();\n\t\n\t            var id = _$this$data.id;\n\t            var userId = _$this$data.userid;\n\t\n\t\n\t            layer.open({\n\t                title: '删除',\n\t                content: '是否删除？',\n\t                btn: ['删除', '取消'],\n\t                yes: function yes() {\n\t                    deleteSalaryOrder({\n\t                        id: id,\n\t                        userId: userId\n\t                    }, function (_ref) {\n\t                        var _ref$msg = _ref.msg;\n\t                        var msg = _ref$msg === undefined ? '删除成功' : _ref$msg;\n\t\n\t\n\t                        layer.msg(msg);\n\t                        $this.closest('tr').remove();\n\t                    }, function (_ref2) {\n\t                        var _ref2$msg = _ref2.msg;\n\t                        var msg = _ref2$msg === undefined ? '删除失败' : _ref2$msg;\n\t\n\t                        layer.msg(msg);\n\t                    });\n\t                }\n\t            });\n\t        });\n\t    },\n\t\n\t    // 上传模板\n\t    upload: function upload() {\n\t        var uploader = WebUploader.create({\n\t            swf: '/Application/Service/Assets/js/plug/webuploader/Uploader.swf', // swf文件路径\n\t            server: '', // 文件接收服务端\n\t\n\t            // 选择文件的按钮。可选。\n\t            // 内部根据当前运行是创建，可能是input元素，也可能是flash.\n\t            auto: false,\n\t            prepareNextFile: true,\n\t            chunked: true,\n\t            duplicate: true, //去重， 根据文件名字、文件大小和最后修改时间来生成hash Key.\n\t            // 只允许选择图片文件。\n\t            accept: {\n\t                title: 'file',\n\t                extensions: '',\n\t                mimeTypes: ''\n\t            },\n\t            pick: {\n\t                id: '.ipt-file',\n\t                multiple: true\n\t            }\n\t        });\n\t\n\t        uploader.on('uploadAccept', function (obj, ret) {});\n\t\n\t        uploader.on('uploadFinished', function () {});\n\t\n\t        $('[data-act=\"upload\"]').click(function () {\n\t            uploader.upload(); //从初始状态开始上传\n\t        });\n\t    }\n\t};\n\t\n\tmodule.exports = salary;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1), __webpack_require__(/*! layer */ 2)))\n\n/***/ },\n\n/***/ 212:\n/*!**********************************************************************************************************************************!*\\\n  !*** D:/item/zbw/~/tpl-html-loader!D:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/batch_audit.vue ***!\n  \\**********************************************************************************************************************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"\\n\\n<div class=\\\"layer-cnt\\\">\\n\\t<form method=\\\"post\\\" id=\\\"batchAudit_form\\\" autocomplete=\\\"off\\\">\\n\\t\\t<div class=\\\"layer-pannel\\\">\\n\\t\\t\\t<p>\\n\\t\\t\\t\\t<label class=\\\"radio-label\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"type\\\" value=\\\"{{value}}\\\" class=\\\"icheck\\\" checked />\\n\\t\\t\\t\\t\\t{{text}}成功\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t{{if text != '发放'}}\\n\\t\\t\\t\\t<label class=\\\"radio-label\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"type\\\" value=\\\"-{{value}}\\\" class=\\\"icheck\\\" />\\n\\t\\t\\t\\t\\t{{text}}失败\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t{{/if}}\\n\\t\\t\\t</p>\\n\\t\\t\\t<p>\\n\\t\\t\\t\\t<label>备注：</label><textarea class=\\\"remark\\\" name=\\\"remark\\\"></textarea>\\n\\t\\t\\t</p>\\n\\t\\t</div>\\n\\t</form>\\n</div>\\n\";\n\n/***/ },\n\n/***/ 234:\n/*!*********************************!*\\\n  !*** ../js/tpl/batch_audit.vue ***!\n  \\*********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__vue_template__ = __webpack_require__(/*! !tpl-html-loader!./../../../../../~/tpl-loader-ie8/lib/selector.js?type=template&index=0!./batch_audit.vue */ 212)\n\tmodule.exports = __vue_script__ || {}\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** business.bundle.js\n **/","\r\nlet { combinePageModule } = require('modules/util');\r\n\r\ncombinePageModule({\r\n\tsalary: require('page/salary'),\r\n\tcompany_declare: require('page/company_declare')\r\n})\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./../js/entry/business.js\n **/","// 业务管理模块\r\nlet { concatApi } = require('./config'),\r\n\r\n\tapi = {\r\n\t\t// 批量审核、批量发放\r\n\t\tupdateSalaryOrder: 'Service-Business-updateSalaryOrder',\r\n\t\t// 删除代发工资\r\n\t\tdeleteSalaryOrder: 'Service-Business-deleteSalaryOrder',\r\n\t\t\r\n\t\tupdateInsuranceOrder: 'Service-Business-updateInsuranceOrder'\r\n\t}\r\n\r\n\r\nmodule.exports = concatApi(api);\n\n\n/** WEBPACK FOOTER **\n ** ./../js/api/business.js\n **/","// 代发工资和申报操作\r\nexports.businessHandler = () => {\r\n    let template = require('art-template'),\r\n        { updateSalaryOrder, updateInsuranceOrder } = require('api/business'),\r\n        checkFn = require('plug/icheck/index');\r\n\r\n    $('.payroll-handle').click(function(e) {\r\n        let checkLen = $('.single-icheck').filter(':checked').length;\r\n\r\n        if (checkLen === 0) {\r\n            layer.msg('请选择记录~');\r\n        } else {\r\n\r\n            let { act, page } = $(this).data(),\r\n                html = '',\r\n                selectedData = $('#J_salary-form').serializeArray();// 获取选中的checkbox\r\n\r\n            // 批量审核、批量发放\r\n            if (act) {\r\n\r\n                let $form = null,\r\n                    title = '',\r\n                    rules = {},\r\n                    messages = {},\r\n                    tplData = {},\r\n                    updateAct = page == 'declare' ? updateInsuranceOrder : updateSalaryOrder;\r\n\r\n                switch (act) {\r\n                    case 'batch_audit':\r\n                        tplData = {\r\n                            value: 1,\r\n                            text: '审核'\r\n                        };\r\n                        title = '批量审核';\r\n                        break;\r\n                    case 'batch_transact':\r\n                        tplData = {\r\n                            value: 3,\r\n                            text: '办理'\r\n                        };\r\n                        title = '批量办理';\r\n                        break;\r\n\r\n                    default:\r\n                        tplData = {\r\n                            value: 3,\r\n                            text: '发放'\r\n                        };\r\n                        title = '批量发放';\r\n                        break;\r\n                }\r\n\r\n\r\n                html = template.render(require('tpl/batch_audit.vue').template)(tplData);\r\n\r\n                layer.open({\r\n                    title,\r\n                    skin: 'batch-layer',\r\n                    content: html,\r\n                    btn: ['确定', '取消'],\r\n                    yes() {\r\n                        $form.submit();\r\n                    },\r\n                    success(){\r\n                        $form = $('.batch-layer form');\r\n                        checkFn.iCheck();\r\n                        $form.validate({\r\n                            submitHandler(form){\r\n                                let formData = $(form).serializeArray();\r\n\r\n                                updateAct(formData.concat(selectedData), ({ msg = title + '成功' }) => {\r\n                                    layer.msg(msg, ()=> {\r\n                                        location.href = location.href;\r\n                                    });\r\n\r\n                                }, ({ msg = title + '失败' }) => {\r\n                                    layer.msg(msg);\r\n                                })\r\n                            },\r\n                            rules,\r\n                            messages\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./../js/modules/business.js\n **/","let checkFn = require('plug/icheck/index'),\r\n    { businessHandler } = require('modules/business'), // 代发工资和申报操作,\r\n    dateFn = require('plug/datetimepicker/index'),\r\n    { countDown } = require('modules/date');\r\n\r\nlet companyDeclare = {\r\n    init() {\r\n        checkFn.init();\r\n        checkFn.checkAll();\r\n        dateFn.getYearMonth();\r\n        businessHandler();\r\n\r\n        $('.deadline').each(function() {\r\n            let $this = $(this),\r\n                value = $this.text().trim(),\r\n                end = new Date(value),\r\n                { timer } = $this.data();\r\n\r\n            if (value == '/') {\r\n                $this.html(`/`);\r\n\r\n            } else {\r\n                if (end.getTime() < new Date().getTime()) {\r\n                    $this.html(`已截止`);\r\n\r\n                } else {\r\n\r\n                    timer = setInterval(function() {\r\n                        let ret = countDown(end),\r\n                            {\r\n                                dd,\r\n                                hh,\r\n                                mm,\r\n                                ss\r\n                            } = ret;\r\n\r\n\r\n                        if (!ret || end.getTime() < new Date().getTime()) {\r\n                            clearInterval(timer);\r\n                        }\r\n\r\n                        $this.html(`${dd}天${hh}小时${mm}分${ss}秒`)\r\n                    }, 1000)\r\n\r\n                    $this.data('timer', timer);\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = companyDeclare;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./../js/page/company_declare.js\n **/","/*\r\n * 上传模板 upload()\r\n */\r\n\r\nlet checkFn = require('plug/icheck/index'),\r\n    WebUploader = require('plug/webuploader/webuploader'),\r\n    { deleteSalaryOrder } = require('api/business'),\r\n    dateFn = require('plug/datetimepicker/index'),\r\n    { dateRange } = require('modules/date'),\r\n    { businessHandler } = require('modules/business');// 代发工资和申报操作\r\n\r\nrequire('plug/validate/index');\r\n\r\n\r\nlet salary = {\r\n    init() {\r\n        var self = this;\r\n\r\n        checkFn.init();\r\n        checkFn.checkAll();\r\n        businessHandler();\r\n        self.upload();\r\n        dateFn.getYearMonth();\r\n        dateFn.getYearMonthDay();\r\n        dateRange('declare');\r\n\r\n        // 删除代发工资\r\n        $('[data-act=\"del-salary\"]').click(function(){\r\n            let $this = $(this),\r\n                {\r\n                    id,\r\n                    userid: userId\r\n                } = $this.data();\r\n\r\n            layer.open({\r\n                title: '删除',\r\n                content: '是否删除？',\r\n                btn: ['删除', '取消'],\r\n                yes(){\r\n                    deleteSalaryOrder({\r\n                        id,\r\n                        userId\r\n                    }, ({ msg = '删除成功' }) => {\r\n\r\n                        layer.msg(msg);\r\n                        $this.closest('tr').remove();\r\n\r\n                    }, ({ msg = '删除失败' }) => {\r\n                        layer.msg(msg);\r\n                    })\r\n                }\r\n            });\r\n        })\r\n\r\n    },\r\n    // 上传模板\r\n    upload() {\r\n        let uploader = WebUploader.create({\r\n            swf: '/Application/Service/Assets/js/plug/webuploader/Uploader.swf', // swf文件路径\r\n            server: '', // 文件接收服务端\r\n\r\n            // 选择文件的按钮。可选。\r\n            // 内部根据当前运行是创建，可能是input元素，也可能是flash.\r\n            auto: false,\r\n            prepareNextFile: true,\r\n            chunked: true,\r\n            duplicate: true, //去重， 根据文件名字、文件大小和最后修改时间来生成hash Key.\r\n            // 只允许选择图片文件。\r\n            accept: {\r\n                title: 'file',\r\n                extensions: '',\r\n                mimeTypes: ''\r\n            },\r\n            pick: {\r\n                id: '.ipt-file',\r\n                multiple: true\r\n            }\r\n        });\r\n\r\n        uploader.on('uploadAccept', function(obj, ret) {\r\n\r\n        });\r\n\r\n        uploader.on('uploadFinished', function() {\r\n\r\n        });\r\n\r\n        $('[data-act=\"upload\"]').click(function() {\r\n            uploader.upload(); //从初始状态开始上传\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\nmodule.exports = salary;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./../js/page/salary.js\n **/","module.exports = \"\\n\\n<div class=\\\"layer-cnt\\\">\\n\\t<form method=\\\"post\\\" id=\\\"batchAudit_form\\\" autocomplete=\\\"off\\\">\\n\\t\\t<div class=\\\"layer-pannel\\\">\\n\\t\\t\\t<p>\\n\\t\\t\\t\\t<label class=\\\"radio-label\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"type\\\" value=\\\"{{value}}\\\" class=\\\"icheck\\\" checked />\\n\\t\\t\\t\\t\\t{{text}}成功\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t{{if text != '发放'}}\\n\\t\\t\\t\\t<label class=\\\"radio-label\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"type\\\" value=\\\"-{{value}}\\\" class=\\\"icheck\\\" />\\n\\t\\t\\t\\t\\t{{text}}失败\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t{{/if}}\\n\\t\\t\\t</p>\\n\\t\\t\\t<p>\\n\\t\\t\\t\\t<label>备注：</label><textarea class=\\\"remark\\\" name=\\\"remark\\\"></textarea>\\n\\t\\t\\t</p>\\n\\t\\t</div>\\n\\t</form>\\n</div>\\n\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** D:/item/zbw/~/tpl-html-loader!D:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/batch_audit.vue\n ** module id = 212\n ** module chunks = 6\n **/","var __vue_script__, __vue_template__\n__vue_template__ = require(\"!!tpl-html-loader!./../../../../../node_modules/tpl-loader-ie8/lib/selector.js?type=template&index=0!./batch_audit.vue\")\nmodule.exports = __vue_script__ || {}\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../js/tpl/batch_audit.vue\n ** module id = 234\n ** module chunks = 6\n **/"],"sourceRoot":""}