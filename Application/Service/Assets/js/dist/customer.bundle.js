webpackJsonp([5],{0:/*!*******************************!*\
  !*** ../js/entry/customer.js ***!
  \*******************************/
function(e,t,i){"use strict";var a=i(4),n=a.combinePageModule;n({customer:i(129)})},113:/*!*****************************!*\
  !*** ../js/api/customer.js ***!
  \*****************************/
function(e,t,i){"use strict";var a=i(8),n=a.concatApi,s={getServiceList:"/Service-Members-cServideList",setService:"/Service-Members-setService",comSetService:"/Service-Members-comSetService",comAddLocation:"/Service-Members-comAddLocation",wLocation:"/Service-Members-wLocation",selectProduct:"/Service-Customer-selectProduct",conSetService:"/Service-Customer-setService",addContractChange:"/Service-Customer-addContractChange",comMembersList:"/Service-Members-comMembersList",deleteLocation:"/Service-Customer-deleteLocation",editProductOrder:"/Service-Customer-editProductOrder",contractIsTurn:"/Service-Customer-isTurnID"};e.exports=n(s)},129:/*!******************************!*\
  !*** ../js/page/customer.js ***!
  \******************************/
function(e,t,i){(function(t,a){"use strict";var n=i(6),s=i(113),r=i(7),c=i(5);i(11),i(3),i(29);var o={init:function(){var e=this;e.setCustomerService(),e.setServiceStatus(),e.addServiceCity(),e.modifyServiceList(),e.getContract(),e.addContract(),e.validateContract(),e["export"](),e.deleteServiceList(),e.submitServiceDetail(),r.getYearMonthDay(),t(".set-startDate").datetimepicker("setStartDate",new Date),c.init(),t(".setting-lb .icheck").on("ifChecked",function(){var e=t(this),i=e.closest(".setting-lb").siblings();i.hasClass("settings-cnt")?(i.show(),t(".date-day").removeClass("ignore")):(t(".settings-cnt").hide(),t(".date-day").addClass("ignore"))}),t('[name="is_salary"]').on("ifChecked",function(){t(".payroll-fee").show(),t('[name="af_service_price"]').removeClass("ignore")}),t('[name="is_salary"]').on("ifUnchecked",function(){t(".payroll-fee").hide(),t('[name="af_service_price"]').addClass("ignore")})},state:"",setCustomerService:function(){var e=this;t('[data-act="set_service"]').click(function(){var r=t(this);s.getServiceList().success(function(s){var c="";c=n.render(i(239).template)(s||{}),a.open({title:!1,area:"400px",type:11,content:c,scrollbar:!1,btn:["确定","取消"],closeBtn:!1,yes:function(){t("#set_service").submit()},success:function(){t("select").selectOrDie()}}),e.validate(t("#set_service"),r)})})},setServiceStatus:function(){var e=this;t('[data-act="set_status"]').click(function(){var i=t(this);e.state=i.data("act"),"contract"==i.data("name")?t("#add_contract").submit():e.getServiceStatusCommon(i)})},getServiceStatusCommon:function(e){for(var s=this,r=[],c=1;31>=c;c++)r.push(c);var o={daysNum:r,id:t('[name="ipt_hidden"]').val()};a.open({title:!1,area:"520px",content:n.render(i(242).template)(o),scrollbar:!1,btn:["确定","取消"],yes:function(){t("#service_settings").submit()}}),t("select").selectOrDie(),s.validate(t("#service_settings"),e)},addServiceCity:function(){var e=this;t('[data-act="set_city"]').click(function(){var i=t(this);e.state=i.data("act"),"contract"==i.data("name")?t("#add_contract").submit():e.addServiceCityCommon(i)})},addServiceCityCommon:function(e){var s=this,r="",c={};c="a"==e.prop("tagName").toLowerCase()?{location_id:e.closest("tr").find(".location-id").text(),location:e.closest("tr").find(".location").data("location"),soc_service_price:e.closest("tr").find(".soc-service-price").text(),pro_service_price:e.closest("tr").find(".pro-service-price").text(),af_service_price:e.closest("tr").find(".af-service-price").text()||t('[name="af_service_price"]').val()}:{},r={id:t('[name="ipt_hidden"]').val()||t('[name="hidden_city"]').val(),tblData:c},a.open({title:"添加服务城市",area:"520px",type:11,content:n.render(i(240).template)(r),scrollbar:!1,btn:["确定","取消"],yes:function(){t("#service_city").submit()}}),t(".city-picker-input").cityPicker({end:"city"}),t("select").selectOrDie(),s.validate(t("#service_city"),e)},modifyServiceList:function(){var e=this;t('[data-act="handle-modify"]').click(function(r){s.getServiceList().success(function(s){var r={id:t('[name="ipt_hidden"]').val(),json:s||{}};a.open({title:"修改客服",area:"400px",type:11,content:n.render(i(241).template)(r),btn:["确定","取消"],yes:function(){t("#service_list").submit()}}),t("select").selectOrDie(),e.validate(t("#service_list"),null)})})},deleteServiceList:function(){t('[data-act="delete"]').click(function(){var e=t(this);a.open({title:"删除操作",content:"确定要删除吗？",btn:["确定","取消"],yes:function(){a.closeAll();var i={id:t('[name="ipt_hidden"]').val(),location_id:e.closest("tr").find(".location-id").text()};s.deleteLocation(i,function(e){var t=e.msg;a.msg(t,function(){location.href=location.href})},function(e){var t=e.msg;a.msg(t)})}})})},submitServiceDetail:function(){var e=this;t('[data-act="service_submit"]').click(function(){e.validate(t("form"),t(this))})},getContract:function(){var e=this;t('[name="user_id"]').change(function(){var i=t(this);"block"==t(".contract-oldId").css("display")&&t('[name="old_id"] option').each(function(){t(this).val()&&(t(this).remove(),t('[name="old_id"]').removeAttr("required"),t("select").selectOrDie("update"))});var a={user_id:i.find("option:selected").val()};s.selectProduct(a).success(function(i){var a=i.status-0,n=i.data;if(null===n)return!1;if(0===a){for(var s="",r=0;r<n.length;r++)s+='<option value="'+n[r].id+'">'+n[r].company_name+"-"+n[r].name+"(合同号："+n[r].id+")</option>";t(".contract-oldId").show(),t('[name="old_id"]').append(s).attr("required","required"),t("select").selectOrDie("update"),e.getContractId()}})})},getContractId:function(){t('[name="old_id"]').change(function(){var e=t(this),i={id:e.find("option:selected").val()};s.contractIsTurn(i,function(e){var i=e.data;t('[name="overtime"]').datetimepicker("setStartDate",i)},function(i){var n=i.msg;a.msg(n),e.children("option").removeAttr("selected"),t("select").selectOrDie("update")})})},addContract:function(){var e=this;t('[data-act="contract_submit"]').click(function(){var i=t(this);e.state=i.data("act"),t("#add_contract").submit()})},validateContract:function(){var e=this;t("#add_contract").validate({submitHandler:function(){var i=e.state;"set_status"==i&&e.getServiceStatusCommon(t('[data-act="set_status"]')),"set_city"==i&&e.addServiceCityCommon(t('[data-act="set_city"]')),"contract_submit"==i&&(t('[data-act="contract_submit"]').attr("disabled","disabled"),s.addContractChange(t("#add_contract").serialize(),function(e){var t=e.msg,i=e.data;a.msg(t,function(){window.location.replace(i)})},function(e){var i=e.msg;a.msg(i,function(){t('[data-act="contract_submit"]').removeAttr("disabled")})}))},rules:{price:{number:!0,min:0,max:999999999.99}},messages:{serviceLayerForm:{required:"服务状态需设定"},price:{number:"套餐费必须是大于0的数字",min:"套餐费必须是大于0的数字",max:"请填写有效套餐费金额"}},errorPlacement:function(e,t){e.appendTo(t.closest(".ipt-box"))}})},validate:function(e,i){e.validate({submitHandler:function(){var n=e.attr("id");!function(){switch(n){case"set_service":var e=[],r=e[0],c=e[1],o=e[2];r=t('[name="service_list"]').find("option:selected"),c=i.closest("tr").find(".company-name").text(),o="确定指定"+r.text()+"为"+c+"的客服吗？",a.open({title:!1,content:'<div class="layer-wra" style="padding-bottom: 0;">'+o+"</div>",btn:["确定","取消"],closeBtn:!1,yes:function(){a.closeAll();var e={admin_id:r.val(),id:i.closest("tr").find('[type="hidden"]').val()};s.setService(e,function(e){var t=e.msg;a.msg(t,function(){location.href=location.href})},function(e){var t=e.msg;a.msg(t)})}});break;case"service_city":var l=t("form").serialize();s.comAddLocation(l,function(e){var t=e.msg;a.closeAll(),a.msg(t,function(){location.href=location.href})},function(e){var i=e.msg;a.msg(i,function(){t('[data-act="contract_submit"]').removeAttr("disabled")})});break;case"service_settings":if("contract"==i.data("name")){var d=t("#service_settings").serialize();t('[name="serviceLayerForm"]').val(d).attr("required","required"),t('[data-act="contract_submit"]').removeAttr("disabled"),a.closeAll()}else s.comSetService(t("#service_settings").serialize(),function(e){var t=e.msg;a.msg(t)});break;case"service_list":s.setService(t("form").serialize(),function(e){var t=e.msg;a.closeAll(),a.msg(t,function(){location.href=location.href})},function(e){var t=e.msg;a.msg(t)});break;case"service_detail":i.val("保存中..."),s.editProductOrder(t("form").serialize(),function(e){var t=e.msg;a.msg(t,function(){window.location.replace("/Service-Customer-productList")})},function(e){var t=e.msg;a.msg(t),i.val("保存")})}}()},rules:{soc_service_price:{number:!0,min:0,max:999999999.99},pro_service_price:{number:!0,min:0,max:999999999.99},af_service_price:{number:!0,min:0,max:999999999.99}},messages:{service_list:{required:"客服列表必填"},soc_service_price:{required:"服务费必填",number:"服务费必须是大于0的数字",min:"服务费必须是大于0的数字",max:"请填写有效服务费金额"},pro_service_price:{required:"服务费必填",number:"服务费必须是大于0的数字",min:"服务费必须是大于0的数字",max:"请填写有效服务费金额"},af_service_price:{required:"服务费必填",number:"服务费必须是大于0的数字",min:"服务费必须是大于0的数字",max:"请填写有效服务费金额"},service_state:{required:"签约状态必选"},overtime:{required:"合同到期必填"},is_salary:{required:"代发工资必选"},admin_id:{required:"客服设定列表必选"}},errorPlacement:function(e,t){e.appendTo(t.closest(".ipt-box"))}})},"export":function(){t("body").on("click",'[data-act="export"]',function(){t("#company_query_form").append('<input type="hidden" name="export" value="1" />'),t("#company_query_form").submit()})}};e.exports=o}).call(t,i(1),i(2))},218:/*!******************************************************************************************************************************!*\
  !*** F:/item/zbw/~/tpl-html-loader!F:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service.vue ***!
  \******************************************************************************************************************************/
function(e,t){e.exports='\n\n<div class="layer-wra service-list">\n	<form method="post" id="set_service">\n		<p class="layer-title">请指定一个客服</p>\n		<div class="form-items">\n			<label class="lb" for="service_list">客服列表</label>\n			<div class="ipt-box">\n				<select name="service_list" title="必填" required>\n					<option value="">请选择</option>\n					{{each data}}\n					<option value="{{data[$index].id}}">{{data[$index].name}}</option>\n					{{/each}}\n				</select>\n			</div>\n		</div>\n	</form>\n</div>\n'},219:/*!***********************************************************************************************************************************!*\
  !*** F:/item/zbw/~/tpl-html-loader!F:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service_city.vue ***!
  \***********************************************************************************************************************************/
function(e,t){e.exports='\n\n<div class="layer-wra service-city">\n	<form method="post" id="service_city" autocomplete="off">\n		<div class="form-items">\n			<label class="lb" for="location">服务城市</label>\n			<input type="hidden" name="id" value="{{id}}" />\n			<input type="hidden" name="location_id" value="{{tblData.location_id}}" />\n			<div class="ipt-box">\n				<p class="city-picker-input ipt-selected">\n					<span class="picker-txt">请选择</span>\n					<input type="hidden" name="location" class="hidden-txt" value="{{tblData.location}}" required />\n				</p>\n			</div>\n		</div>\n		<div class="form-items">\n			<label class="lb" for="soc_service_price">社保服务费</label>\n			<div class="ipt-box">\n				<input type="text" name="soc_service_price" class="ipt w-normal" value="{{tblData.soc_service_price}}" required />元/人/月\n			</div>\n		</div>\n		<div class="form-items">\n			<label class="lb" for="pro_service_price">公积金服务费</label>\n			<div class="ipt-box">\n				<input type="text" name="pro_service_price" class="ipt w-normal" value="{{tblData.pro_service_price}}" required />元/人/月\n			</div>\n		</div>\n		{{if tblData.af_service_price}}\n		<div class="form-items">\n			<label class="lb" for="af_service_price">代发工资服务费</label>\n			<div class="ipt-box af-service-price">\n				<span>{{tblData.af_service_price}}</span>元/人/月\n			</div>\n		</div>\n		{{/if}}\n	</form>\n</div>\n\n'},220:/*!***********************************************************************************************************************************!*\
  !*** F:/item/zbw/~/tpl-html-loader!F:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service_list.vue ***!
  \***********************************************************************************************************************************/
function(e,t){e.exports='\n\n<div class="layer-wra service-list">\n	<form method="post" id="service_list">\n		<input type="hidden" name="id" value="{{id}}" />\n		<div class="form-items">\n			<label class="lb" for="service_list">客服列表</label>\n			<div class="ipt-box">\n				<select name="admin_id" title="必填" required>\n					<option value="">请选择</option>\n					{{each json.data as data key}}\n					<option value="{{data.id}}">{{data.name}}</option>\n					{{/each}}\n				</select>\n			</div>\n		</div>\n	</form>\n</div>\n'},221:/*!*************************************************************************************************************************************!*\
  !*** F:/item/zbw/~/tpl-html-loader!F:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service_status.vue ***!
  \*************************************************************************************************************************************/
function(e,t){e.exports='\n\n<div class="layer-wra service-settings">\n	<form method="post" id="service_settings">\n		<input type="hidden" name="id" value="{{id}}">\n		<div class="settings-tab ipt-box">\n			<label><input type="radio" name="service_state" class="iradio" value="0" required />未签约</label>\n			<label><input type="radio" name="service_state" class="iradio" value="2" />服务中</label>\n			<label><input type="radio" name="service_state" class="iradio" value="3" />服务结束</label>\n			<label for="service_state" class="error">签约状态必填</label>\n\n		</div>\n		<div class="layer-settings-cnt">\n			<fieldset>\n				<div class="form-items fl">\n					<label for="overtime">合同到期</label>\n					<div class="ipt-box">\n						<input type="text" name="overtime" class="ipt date-day" readonly />\n					</div>\n				</div>\n				<p>社保公积金</p>\n				<div class="form-items">\n					<label for="inc_handle_days">办理天数：</label>\n					<div class="ipt-box">\n						<select name="inc_handle_days" title="办理天数必填">\n							<option value="">请选择</option>\n							{{each daysNum as i}}\n							<option value="{{i}}">{{i}}</option>\n							{{/each}}\n						</select>天\n					</div>\n				</div>\n				<div class="form-items">\n					<label for="is_salary">是否代发工资：</label>\n					<div class="ipt-box">\n						<label><input type="radio" name="is_salary" class="iradio" value="1" />是</label>\n						<label><input type="radio" name="is_salary" class="iradio" value="0" />否</label>\n						<label for="is_salary" class="error">代发工资必填</label>\n					</div>\n				</div>\n			</fieldset>\n		</div>\n	</form>\n</div>\n'},239:/*!*****************************!*\
  !*** ../js/tpl/service.vue ***!
  \*****************************/
function(e,t,i){var a,n;n=i(218),e.exports=a||{},n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},240:/*!**********************************!*\
  !*** ../js/tpl/service_city.vue ***!
  \**********************************/
function(e,t,i){var a,n;n=i(219),e.exports=a||{},n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},241:/*!**********************************!*\
  !*** ../js/tpl/service_list.vue ***!
  \**********************************/
function(e,t,i){var a,n;n=i(220),e.exports=a||{},n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},242:/*!************************************!*\
  !*** ../js/tpl/service_status.vue ***!
  \************************************/
function(e,t,i){var a,n;n=i(221),e.exports=a||{},n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)}});
//# sourceMappingURL=customer.bundle.js.map