webpackJsonp([5],{0:/*!*******************************!*\
  !*** ../js/entry/customer.js ***!
  \*******************************/
function(t,e,i){"use strict";var a=i(/*! modules/util */4),n=a.combinePageModule;n({customer:i(/*! page/customer */133)})},117:/*!*****************************!*\
  !*** ../js/api/customer.js ***!
  \*****************************/
function(t,e,i){"use strict";var a=i(/*! ./config */8),n=a.concatApi,s={getServiceList:"/Service-Members-cServideList",setService:"/Service-Members-setService",comSetService:"/Service-Members-comSetService",comAddLocation:"/Service-Members-comAddLocation",wLocation:"/Service-Members-wLocation",selectProduct:"/Service-Customer-selectProduct",conSetService:"/Service-Customer-setService",addContractChange:"/Service-Customer-addContractChange",comMembersList:"/Service-Members-comMembersList",deleteLocation:"/Service-Customer-deleteLocation",editProductOrder:"/Service-Customer-editProductOrder",contractIsTurn:"/Service-Customer-isTurnID"};t.exports=n(s)},133:/*!******************************!*\
  !*** ../js/page/customer.js ***!
  \******************************/
function(t,e,i){(function(e,a){"use strict";var n=i(/*! art-template */6),s=i(/*! api/customer */117),r=i(/*! plug/datetimepicker/index */7),c=i(/*! plug/icheck/index */5);i(/*! plug/selectordie */10),i(/*! plug/validate/index */3),i(/*! plug/city-picker/city-picker */29);var o={init:function(){var t=this;t.setCustomerService(),t.setServiceStatus(),t.addServiceCity(),t.modifyServiceList(),t.getContract(),t.addContract(),t.validateContract(),t["export"](),t.deleteServiceList(),t.submitServiceDetail(),r.getYearMonthDay(),e(".set-startDate").datetimepicker("setStartDate",new Date),c.init(),e(".setting-lb .icheck").on("ifChecked",function(){var t=e(this),i=t.closest(".setting-lb").siblings();i.hasClass("settings-cnt")?(i.show(),e(".date-day").removeClass("ignore")):(e(".settings-cnt").hide(),e(".date-day").addClass("ignore"))}),e('[name="is_salary"]').on("ifChecked",function(){e(".payroll-fee").show(),e('[name="af_service_price"]').removeClass("ignore")}),e('[name="is_salary"]').on("ifUnchecked",function(){e(".payroll-fee").hide(),e('[name="af_service_price"]').addClass("ignore")})},state:"",setCustomerService:function(){var t=this;e('[data-act="set_service"]').click(function(){var r=e(this);s.getServiceList().success(function(s){var c="";c=n.render(i(/*! tpl/service.vue */243).template)(s||{}),a.open({title:!1,area:"400px",type:11,content:c,scrollbar:!1,btn:["确定","取消"],closeBtn:!1,yes:function(){e("#set_service").submit()},success:function(){e("select").selectOrDie()}}),t.validate(e("#set_service"),r)})})},setServiceStatus:function(){var t=this;e('[data-act="set_status"]').click(function(){var i=e(this);t.state=i.data("act"),"contract"==i.data("name")?e("#add_contract").submit():t.getServiceStatusCommon(i)})},getServiceStatusCommon:function(t){for(var s=this,r=[],c=1;c<=31;c++)r.push(c);var o={daysNum:r,id:e('[name="ipt_hidden"]').val()};a.open({title:!1,area:"520px",content:n.render(i(/*! tpl/service_status.vue */246).template)(o),scrollbar:!1,btn:["确定","取消"],yes:function(){e("#service_settings").submit()}}),e("select").selectOrDie(),s.validate(e("#service_settings"),t)},addServiceCity:function(){var t=this;e('[data-act="set_city"]').click(function(){var i=e(this);t.state=i.data("act"),"contract"==i.data("name")?e("#add_contract").submit():t.addServiceCityCommon(i)})},addServiceCityCommon:function(t){var s=this,r="",c={};c="a"==t.prop("tagName").toLowerCase()?{location_id:t.closest("tr").find(".location-id").text(),location:t.closest("tr").find(".location").data("location"),soc_service_price:t.closest("tr").find(".soc-service-price").text(),pro_service_price:t.closest("tr").find(".pro-service-price").text(),af_service_price:t.closest("tr").find(".af-service-price").text()||e('[name="af_service_price"]').val()}:{},r={id:e('[name="ipt_hidden"]').val()||e('[name="hidden_city"]').val(),tblData:c},a.open({title:"添加服务城市",area:"520px",type:11,content:n.render(i(/*! tpl/service_city.vue */244).template)(r),scrollbar:!1,btn:["确定","取消"],yes:function(){e("#service_city").submit()}}),e(".city-picker-input").cityPicker({end:"city"}),e("select").selectOrDie(),s.validate(e("#service_city"),t)},modifyServiceList:function(){var t=this;e('[data-act="handle-modify"]').click(function(r){s.getServiceList().success(function(s){var r={id:e('[name="ipt_hidden"]').val(),json:s||{}};a.open({title:"修改客服",area:"400px",type:11,content:n.render(i(/*! tpl/service_list.vue */245).template)(r),btn:["确定","取消"],yes:function(){e("#service_list").submit()}}),e("select").selectOrDie(),t.validate(e("#service_list"),null)})})},deleteServiceList:function(){e('[data-act="delete"]').click(function(){var t=e(this);a.open({title:"删除操作",content:"确定要删除吗？",btn:["确定","取消"],yes:function(){a.closeAll();var i={id:e('[name="ipt_hidden"]').val(),location_id:t.closest("tr").find(".location-id").text()};s.deleteLocation(i,function(t){var e=t.msg;a.msg(e,function(){location.href=location.href})},function(t){var e=t.msg;a.msg(e)})}})})},submitServiceDetail:function(){var t=this;e('[data-act="service_submit"]').click(function(){t.validate(e("form"),e(this))})},getContract:function(){var t=this;e('[name="user_id"]').change(function(){var i=e(this);"block"==e(".contract-oldId").css("display")&&e('[name="old_id"] option').each(function(){e(this).val()&&(e(this).remove(),e('[name="old_id"]').removeAttr("required"),e("select").selectOrDie("update"))});var a={user_id:i.find("option:selected").val()};s.selectProduct(a).success(function(i){var a=i.status-0,n=i.data;if(null===n)return!1;if(0===a){for(var s="",r=0;r<n.length;r++)s+='<option value="'+n[r].id+'">'+n[r].company_name+"-"+n[r].name+"(合同号："+n[r].id+")</option>";e(".contract-oldId").show(),e('[name="old_id"]').append(s).attr("required","required"),e("select").selectOrDie("update"),t.getContractId()}})})},getContractId:function(){e('[name="old_id"]').change(function(){var t=e(this),i={id:t.find("option:selected").val()};s.contractIsTurn(i,function(t){var i=t.data;e('[name="overtime"]').datetimepicker("setStartDate",i)},function(i){var n=i.msg;a.msg(n),t.children("option").removeAttr("selected"),e("select").selectOrDie("update")})})},addContract:function(){var t=this;e('[data-act="contract_submit"]').click(function(){var i=e(this);t.state=i.data("act"),e("#add_contract").submit()})},validateContract:function(){var t=this;e("#add_contract").validate({submitHandler:function(){var i=t.state;"set_status"==i&&t.getServiceStatusCommon(e('[data-act="set_status"]')),"set_city"==i&&t.addServiceCityCommon(e('[data-act="set_city"]')),"contract_submit"==i&&(e('[data-act="contract_submit"]').attr("disabled","disabled"),s.addContractChange(e("#add_contract").serialize(),function(t){var e=t.msg,i=t.data;a.msg(e,function(){window.location.replace(i)})},function(t){var i=t.msg;a.msg(i,function(){e('[data-act="contract_submit"]').removeAttr("disabled")})}))},rules:{price:{number:!0,min:0,max:999999999.99}},messages:{serviceLayerForm:{required:"服务状态需设定"},price:{number:"套餐费必须是大于0的数字",min:"套餐费必须是大于0的数字",max:"请填写有效套餐费金额"}},errorPlacement:function(t,e){t.appendTo(e.closest(".ipt-box"))}})},validate:function(t,i){t.validate({submitHandler:function(){var n=t.attr("id");!function(){switch(n){case"set_service":var t=[],r=t[0],c=t[1],o=t[2];r=e('[name="service_list"]').find("option:selected"),c=i.closest("tr").find(".company-name").text(),o="确定指定"+r.text()+"为"+c+"的客服吗？",a.open({title:!1,content:'<div class="layer-wra" style="padding-bottom: 0;">'+o+"</div>",btn:["确定","取消"],closeBtn:!1,yes:function(){a.closeAll();var t={admin_id:r.val(),id:i.closest("tr").find('[type="hidden"]').val()};s.setService(t,function(t){var e=t.msg;a.msg(e,function(){location.href=location.href})},function(t){var e=t.msg;a.msg(e)})}});break;case"service_city":var l=e("form").serialize();s.comAddLocation(l,function(t){var e=t.msg;a.closeAll(),a.msg(e,function(){location.href=location.href})},function(t){var i=t.msg;a.msg(i,function(){e('[data-act="contract_submit"]').removeAttr("disabled")})});break;case"service_settings":if("contract"==i.data("name")){var d=e("#service_settings").serialize();e('[name="serviceLayerForm"]').val(d).attr("required","required"),e('[data-act="contract_submit"]').removeAttr("disabled"),a.closeAll()}else s.comSetService(e("#service_settings").serialize(),function(t){var e=t.msg;a.msg(e)});break;case"service_list":s.setService(e("form").serialize(),function(t){var e=t.msg;a.closeAll(),a.msg(e,function(){location.href=location.href})},function(t){var e=t.msg;a.msg(e)});break;case"service_detail":i.val("保存中..."),s.editProductOrder(e("form").serialize(),function(t){var e=t.msg;a.msg(e,function(){window.location.replace("/Service-Customer-productList")})},function(t){var e=t.msg;a.msg(e),i.val("保存")})}}()},rules:{soc_service_price:{number:!0,min:0,max:999999999.99},pro_service_price:{number:!0,min:0,max:999999999.99},af_service_price:{number:!0,min:0,max:999999999.99}},messages:{service_list:{required:"客服列表必填"},soc_service_price:{required:"服务费必填",number:"服务费必须是大于0的数字",min:"服务费必须是大于0的数字",max:"请填写有效服务费金额"},pro_service_price:{required:"服务费必填",number:"服务费必须是大于0的数字",min:"服务费必须是大于0的数字",max:"请填写有效服务费金额"},af_service_price:{required:"服务费必填",number:"服务费必须是大于0的数字",min:"服务费必须是大于0的数字",max:"请填写有效服务费金额"},service_state:{required:"签约状态必选"},overtime:{required:"合同到期必填"},is_salary:{required:"代发工资必选"},admin_id:{required:"客服设定列表必选"}},errorPlacement:function(t,e){t.appendTo(e.closest(".ipt-box"))}})},"export":function(){e("body").on("click",'[data-act="export"]',function(){e("#company_query_form").append('<input type="hidden" name="export" value="1" />'),e("#company_query_form").submit(),e('input[name="export"]').remove()})}};t.exports=o}).call(e,i(/*! jquery */1),i(/*! layer */2))},222:/*!******************************************************************************************************************************!*\
  !*** D:/item/zbw/~/tpl-html-loader!D:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service.vue ***!
  \******************************************************************************************************************************/
function(t,e){t.exports='\n\n<div class="layer-wra service-list">\n\t<form method="post" id="set_service">\n\t\t<p class="layer-title">请指定一个客服</p>\n\t\t<div class="form-items">\n\t\t\t<label class="lb" for="service_list">客服列表</label>\n\t\t\t<div class="ipt-box">\n\t\t\t\t<select name="service_list" title="必填" required>\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t{{each data}}\n\t\t\t\t\t<option value="{{data[$index].id}}">{{data[$index].name}}</option>\n\t\t\t\t\t{{/each}}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n'},223:/*!***********************************************************************************************************************************!*\
  !*** D:/item/zbw/~/tpl-html-loader!D:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service_city.vue ***!
  \***********************************************************************************************************************************/
function(t,e){t.exports='\n\n<div class="layer-wra service-city">\n\t<form method="post" id="service_city" autocomplete="off">\n\t\t<div class="form-items">\n\t\t\t<label class="lb" for="location">服务城市</label>\n\t\t\t<input type="hidden" name="id" value="{{id}}" />\n\t\t\t<input type="hidden" name="location_id" value="{{tblData.location_id}}" />\n\t\t\t<div class="ipt-box">\n\t\t\t\t<p class="city-picker-input ipt-selected">\n\t\t\t\t\t<span class="picker-txt">请选择</span>\n\t\t\t\t\t<input type="hidden" name="location" class="hidden-txt" value="{{tblData.location}}" required />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-items">\n\t\t\t<label class="lb" for="soc_service_price">社保服务费</label>\n\t\t\t<div class="ipt-box">\n\t\t\t\t<input type="text" name="soc_service_price" class="ipt w-normal" value="{{tblData.soc_service_price}}" required />元/人/月\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-items">\n\t\t\t<label class="lb" for="pro_service_price">公积金服务费</label>\n\t\t\t<div class="ipt-box">\n\t\t\t\t<input type="text" name="pro_service_price" class="ipt w-normal" value="{{tblData.pro_service_price}}" required />元/人/月\n\t\t\t</div>\n\t\t</div>\n\t\t{{if tblData.af_service_price}}\n\t\t<div class="form-items">\n\t\t\t<label class="lb" for="af_service_price">代发工资服务费</label>\n\t\t\t<div class="ipt-box af-service-price">\n\t\t\t\t<span>{{tblData.af_service_price}}</span>元/人/月\n\t\t\t</div>\n\t\t</div>\n\t\t{{/if}}\n\t</form>\n</div>\n\n'},224:/*!***********************************************************************************************************************************!*\
  !*** D:/item/zbw/~/tpl-html-loader!D:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service_list.vue ***!
  \***********************************************************************************************************************************/
function(t,e){t.exports='\n\n<div class="layer-wra service-list">\n\t<form method="post" id="service_list">\n\t\t<input type="hidden" name="id" value="{{id}}" />\n\t\t<div class="form-items">\n\t\t\t<label class="lb" for="service_list">客服列表</label>\n\t\t\t<div class="ipt-box">\n\t\t\t\t<select name="admin_id" title="必填" required>\n\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t{{each json.data as data key}}\n\t\t\t\t\t<option value="{{data.id}}">{{data.name}}</option>\n\t\t\t\t\t{{/each}}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n'},225:/*!*************************************************************************************************************************************!*\
  !*** D:/item/zbw/~/tpl-html-loader!D:/item/zbw/~/tpl-loader-ie8/lib/selector.js?type=template&index=0!../js/tpl/service_status.vue ***!
  \*************************************************************************************************************************************/
function(t,e){t.exports='\n\n<div class="layer-wra service-settings">\n\t<form method="post" id="service_settings">\n\t\t<input type="hidden" name="id" value="{{id}}">\n\t\t<div class="settings-tab ipt-box">\n\t\t\t<label><input type="radio" name="service_state" class="iradio" value="0" required />未签约</label>\n\t\t\t<label><input type="radio" name="service_state" class="iradio" value="2" />服务中</label>\n\t\t\t<label><input type="radio" name="service_state" class="iradio" value="3" />服务结束</label>\n\t\t\t<label for="service_state" class="error">签约状态必填</label>\n\n\t\t</div>\n\t\t<div class="layer-settings-cnt">\n\t\t\t<fieldset>\n\t\t\t\t<div class="form-items fl">\n\t\t\t\t\t<label for="overtime">合同到期</label>\n\t\t\t\t\t<div class="ipt-box">\n\t\t\t\t\t\t<input type="text" name="overtime" class="ipt date-day" readonly />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p>社保公积金</p>\n\t\t\t\t<div class="form-items">\n\t\t\t\t\t<label for="inc_handle_days">办理天数：</label>\n\t\t\t\t\t<div class="ipt-box">\n\t\t\t\t\t\t<select name="inc_handle_days" title="办理天数必填">\n\t\t\t\t\t\t\t<option value="">请选择</option>\n\t\t\t\t\t\t\t{{each daysNum as i}}\n\t\t\t\t\t\t\t<option value="{{i}}">{{i}}</option>\n\t\t\t\t\t\t\t{{/each}}\n\t\t\t\t\t\t</select>天\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-items">\n\t\t\t\t\t<label for="is_salary">是否代发工资：</label>\n\t\t\t\t\t<div class="ipt-box">\n\t\t\t\t\t\t<label><input type="radio" name="is_salary" class="iradio" value="1" />是</label>\n\t\t\t\t\t\t<label><input type="radio" name="is_salary" class="iradio" value="0" />否</label>\n\t\t\t\t\t\t<label for="is_salary" class="error">代发工资必填</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</div>\n\t</form>\n</div>\n'},243:/*!*****************************!*\
  !*** ../js/tpl/service.vue ***!
  \*****************************/
function(t,e,i){var a,n;n=i(/*! !tpl-html-loader!./../../../../../~/tpl-loader-ie8/lib/selector.js?type=template&index=0!./service.vue */222),t.exports=a||{},n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},244:/*!**********************************!*\
  !*** ../js/tpl/service_city.vue ***!
  \**********************************/
function(t,e,i){var a,n;n=i(/*! !tpl-html-loader!./../../../../../~/tpl-loader-ie8/lib/selector.js?type=template&index=0!./service_city.vue */223),t.exports=a||{},n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},245:/*!**********************************!*\
  !*** ../js/tpl/service_list.vue ***!
  \**********************************/
function(t,e,i){var a,n;n=i(/*! !tpl-html-loader!./../../../../../~/tpl-loader-ie8/lib/selector.js?type=template&index=0!./service_list.vue */224),t.exports=a||{},n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)},246:/*!************************************!*\
  !*** ../js/tpl/service_status.vue ***!
  \************************************/
function(t,e,i){var a,n;n=i(/*! !tpl-html-loader!./../../../../../~/tpl-loader-ie8/lib/selector.js?type=template&index=0!./service_status.vue */225),t.exports=a||{},n&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=n)}});
//# sourceMappingURL=customer.bundle.js.map